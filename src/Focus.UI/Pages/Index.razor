@page "/"

<PageTitle>Index</PageTitle>

<MudText Typo="Typo.h3" GutterBottom="true">Home</MudText>

<MudList Clickable="false">
    @foreach (var todoItem in _todoItems)
    {
        @if (!todoItem.IsDone)
        {
            <MudPaper Class="pa-2 ma-2 cursor-default" Outlined="true">
                <MudListItem OnClick="(() => UpdateItem(todoItem))" Icon="@Icons.Material.Filled.CheckBoxOutlineBlank" IconColor="Color.Primary">
                    @todoItem.Task
                </MudListItem>
            </MudPaper>
        }
    }
</MudList>

<MudList Clickable="false">
    @if (showCompletedTasks)
    {
        <MudPaper Class="pa-2 ma-2 cursor-default" Outlined="true" Width="180px">
            <MudListItem OnClick="(() => ShowCompletedTasks())" Icon="@Icons.Material.Outlined.ArrowDropDown" IconColor="Color.Primary">
                Completed
            </MudListItem>
        </MudPaper>
    }
    else
    {
        <MudPaper Class="pa-2 ma-2 cursor-default" Outlined="true" Width="180px">
            <MudListItem OnClick="(() => ShowCompletedTasks())" Icon="@Icons.Material.Outlined.ArrowRight" IconColor="Color.Primary">
                Completed
            </MudListItem>
        </MudPaper>
    }
</MudList>

@if (showCompletedTasks)
{
    <MudList Clickable="false">
        @foreach (var todoItem in _todoItems)
        {
            @if (todoItem.IsDone)
            {
                <MudPaper Class="pa-2 ma-2 cursor-default" Outlined="true">
                    <MudListItem OnClick="(() => UpdateItem(todoItem))" Icon="@Icons.Material.Filled.CheckBox" IconColor="Color.Primary"
                                 Style="rounded">
                        @todoItem.Task
                    </MudListItem>
                </MudPaper>
            }
        }
    </MudList>
}


<MudList Clickable="false">
    <MudPaper Class="pa-2 ma-2 cursor-default" Outlined="true">
        <MudListItem OnClick="AddTodoItem" Icon="@Icons.Material.Filled.Add" IconColor="Color.Primary">
            Add a Item
        </MudListItem>
    </MudPaper>
</MudList>

<MudMenu Icon="@Icons.Material.Filled.Person" IconColor="Color.Primary">
    <MudMenuItem>Item 1</MudMenuItem>
    <MudMenuItem>Item 2</MudMenuItem>
    <MudMenuItem>Item 3</MudMenuItem>
</MudMenu>

@code {
    public class TodoItem
    {
        public bool IsDone { get; set; }
        public string Task { get; set; } = string.Empty;
    }

    public List<TodoItem> _todoItems = new List<TodoItem>
    {
        new TodoItem { IsDone = true, Task = "Go the market" },
        new TodoItem { IsDone = false, Task = "Read EFCore Database book" }
    };

    private bool showCompletedTasks = false;

    private void UpdateItem(TodoItem item)
    {
        item.IsDone = !item.IsDone;
        //StateHasChanged();
    }

    private void AddTodoItem()
    {

    }

    private void ShowCompletedTasks()
    {
        showCompletedTasks = !showCompletedTasks;
    }
}